<!DOCTYPE html>
<html>
<body>
<canvas resize="true" id="canvas"></canvas>
<script src="/js/components/paper/dist/paper-full.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script type="text/paperscript" canvas="canvas">
  
  /*
  var User = (function(){
  
    var circle = new Path.Circle({ radius: 10, center: [-100, -100] });
    circle.strokeColor = 'black';
    
    function User(id){
        this.circle = circle.clone();
        this.id = id;
    }
    
    User.prototype.update = function(x, y){
        this.circle.position = new Point( x, y );
        socket.emit('user:movement', x, y);
    };
    
    return User;
    
  })();
  
  var users = (function(){
    
    var users = {};
    
    users.init = function(usersRetrieved){
        for (var i in usersRetrieved) users.add(usersRetrieved[i]);
    };
    
    users.add = function(user){
        users[user.id] = new User();
    };
    
    users.update = function(id, x, y){
        users[id].update(x, y);
    };
    
    return users;
    
  })();
  
  var socket = io.connect('http://localhost');
  socket.on('users', users.init);
  socket.on('user:new', users.add);
  socket.on('user:movement',  users.update);
  
  var me;
  
  socket.on('user', function(id){
    me = new User(id);
  });
  
  function onMouseMove(e){
    me.update(e.point.x, e.point.y);
  }*/
  
  var socket = io.connect('http://localhost');
  
  var users;
  socket.on('users', function(userss){
    users = userss;
    console.log(users);
  });
  
  socket.on('users:joined', function(user){
    users[user.id] = user;
    console.log(users);
  });
  
  socket.on('users:left', function(id){
    delete users[id];
    console.log(users);
  });

  

  
</script>
</body>
</html>